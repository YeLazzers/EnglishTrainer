# English Trainer

> Micro-SaaS тренажер английского языка. Telegram Bot → Telegram Mini App.

---

## 1. Vision & Problem

### Problem (Какую проблему решаем)
- Заниматься с преподавателем дорого
- Учить по учебникам тяжело и скучно
- Duolingo и аналоги: вокабуляр и темы неинтересные, нет вовлечения, шаблонные упражнения
- Нет индивидуального подхода — все учат одно и то же в одном темпе

### Target Audience (Для кого)
- Люди, которые хотят практиковать английский в удобное время
- Предпочитают небольшие сессии (5-15 мин)
- Хотят узнавать новое и закреплять старое
- Важен комфортный, индивидуальный темп

### Value Proposition (Почему выберут нас)
- **LLM-ориентированность** — индивидуальный подход к каждому пользователю
- **Мониторинг** сильных и слабых зон, адаптация контента
- **Тренажер-подход** — не просто карточки, а активная практика с обратной связью
- **Telegram-native** — не нужно скачивать отдельное приложение

### Competitors / Alternatives (Конкуренты и аналоги)

#### Telegram-боты
| Название | Суть | Слабость |
|----------|------|----------|
| **Andy English Bot** | Диалоги, грамматика, игры — один из самых популярных ботов | Шаблонные ответы, нет LLM, быстро надоедает |
| **Zaplingo** | AI-репетитор в Telegram/WhatsApp, исправление ошибок | Платный, ограниченный бесплатный доступ |

#### AI/LLM-приложения
| Название | Суть | Слабость |
|----------|------|----------|
| **Speak** | Разговорная практика с AI-тьютором, ролевые сценарии | ~$14/мес, нет Telegram, отдельное приложение |
| **TalkPal** | AI-собеседник, 57+ языков | Free — 10 мин/день, нет фокуса на английском |
| **Praktika** | 3D-аватары, иммерсивные сессии | Ограниченная библиотека, только моб. приложение |

#### Традиционные приложения
| Название | Суть | Слабость |
|----------|------|----------|
| **Duolingo Max** | AI-функции на базе GPT, геймификация | AI только в тарифе Max (~$30/мес), разговоры — не фокус |
| **ELSA Speak** | Анализ произношения на уровне фонем | Только произношение, нет свободных диалогов |

#### Наше позиционирование
- Ниша Telegram-ботов с LLM практически свободна
- Нулевой порог входа (не нужно скачивать приложение)
- Ценовое преимущество перед приложениями ($8-30/мес)
- Фокус на практику + обратная связь, а не на тесты и карточки

---

## 2. User Personas

### Persona 1
- Кто:
- Цель:
- Боль:
- Сценарий использования:

### Persona 2
- Кто:
- Цель:
- Боль:
- Сценарий использования:

---

## 3. Core Mechanics (Ключевые механики)

### 3.1 Онбординг
- Пользователь пишет вводное сообщение о себе — на английском или на русском в свободной форме
- Рассказывает о своём уровне, целях, интересах и увлечениях
- LLM определяет навскидку уровень английского, извлекает цели и интересные темы
- Дальнейший контент генерируется с учётом интересов и уровня пользователя

### 3.2 Грамматика (теория)
- LLM объясняет грамматическое правило (present perfect, conditionals и т.д.)
- Правило может быть новым или повторением для закрепления
- После объяснения — немедленный переход к практике на это правило

### 3.3 Практика грамматики
- Мини-сессия: серия упражнений подряд с **немедленным фидбэком**
- Цель — выполнить максимум заданий за короткий срок
- Упражнения на пройденные правила, адаптивная сложность
- **Форматы упражнений (MVP):**
  - Выбор правильного варианта (inline buttons)
  - Заполни пропуск (ввод текста)

### 3.4 Свободное письмо
- Пользователь пишет свободный текст на английском
- LLM оценивает текст, раскладывает по правилам
- Указывает что хорошо, что нужно улучшить
- Результаты корректируют оценки по разделам (грамматика, вокабуляр и тп)

### 3.5 Вокабуляр
- Механика на проверку и пополнение словарного запаса
- Детали формата — TBD

### 3.6 Аудирование и говорение *(Post-MVP)*
- Запись голосовых сообщений для тренировки говорения
- Транскрибация речи и/или качественная оценка
- Тренировка аудирования (формат TBD)

### 3.7 Статистика и оценка
- Какие правила изучены, сколько раз практиковались
- Качество выполнения упражнений — оценка 0-100% по каждому правилу
- Корреляция оценки с анализом свободного письма
- Мониторинг сильных и слабых зон → адаптация контента

### Контент
- Генерируется LLM с учётом уровня и интересов пользователя
- Грамматические правила — структурированная база (уровни A1-C2)
- Упражнения генерируются динамически под конкретное правило и пользователя

---

## 4. Stages (Этапы развития)

### Stage 0 — Discovery & Design
- [ x ] Финализировать продукт-документ
- [ x ] Определить ключевые механики
- [ х ] Спроектировать user flow
- [ x ] Выбрать tech stack

### Stage 1 — MVP (Telegram Bot)
**Цель:** валидация идеи, первые пользователи

**Scope:**
<!-- TODO: минимальный набор фич для запуска -->

**Out of scope (сознательно откладываем):**
<!-- TODO -->

**Success Metrics:**
<!-- TODO: по каким метрикам поймём, что MVP успешен -->

### Stage 2 — Post-MVP (Telegram Bot, улучшенный)
**Цель:** retention и рост на основе данных из MVP

**Scope:**
<!-- TODO -->

**Success Metrics:**
<!-- TODO -->

### Stage 3 — Telegram Mini App
**Цель:** богатый UI, расширение возможностей

**Scope:**
<!-- TODO -->

**Success Metrics:**
<!-- TODO -->

### Stage 4 — Monetization & Scale
**Цель:** устойчивая бизнес-модель

**Scope:**
<!-- TODO -->

---

## 5. Monetization (Монетизация)

### Модель
<!-- TODO: freemium / подписка / one-time / credits -->

### Free tier
<!-- TODO: что доступно бесплатно -->

### Paid tier
<!-- TODO: что доступно за деньги -->

### Pricing
<!-- TODO -->

---

## 6. Tech Stack

### Bot
- Runtime: **Node.js**
- Language: **TypeScript**
- Framework: **grammY** — TS-first Telegram bot framework
- Режим работы: **long polling** (dev) → **webhooks** (prod)
- Web-сервер: не нужен для MVP (grammY имеет встроенную поддержку webhooks для прода)

### Database
- Primary: **SQLite** (файловая БД, нулевой setup)
- ORM: **Prisma** (типизация, миграции, лёгкий переезд на PostgreSQL)
- Session Cache: **Redis** (хранение активных сессий грамматических упражнений, TTL 24h)

### Session Management
- **Redis** (отдельный Docker контейнер): активные практические сессии
- **SQLite** (Prisma): постоянная статистика и история практики (для будущих версий)

### AI / NLP
- **OpenAI API** (GPT) — оплаченный аккаунт
- Используется для: объяснение правил, генерация упражнений, оценка свободного письма, онбординг (определение уровня)
- SDK: `openai` npm package

### Hosting / Infra
- MVP: **локально** (long polling, не нужен сервер)
- Prod: TBD (Railway / Fly.io / VPS)
- CI/CD: TBD

### Mini App (Stage 3)
- Frontend: TBD
- State management: TBD

---

## 7. Architecture (High-Level)

```
[ User ] → [ Telegram ] → [ Bot Server ] → [ DB ]
                                         → [ AI Service ]
```

<!-- TODO: расширить по мере проработки -->

---

## 8. User Flow (MVP)

### Навигационная архитектура

**Reply Keyboard (постоянная клавиатура внизу):**
- Меняется динамически в зависимости от текущего стейта
- В главном меню — кнопки разделов
- В сессии — кнопки управления (пропустить, завершить и т.д.)

**Inline Buttons (под сообщениями):**
- Варианты ответа в упражнениях
- Выбор правила/темы
- Подтверждения и переходы

**Свободный текст — интерпретируется по текущему стейту:**
- В практике → ответ на задание
- В свободном письме → эссе для оценки
- В онбординге → вводное сообщение

### State Machine

```
ONBOARDING ─────→ MAIN_MENU
                     │
        ┌────────────┼────────────┬──────────────┐
        ▼            ▼            ▼              ▼
  GRAMMAR_THEORY  GRAMMAR_   FREE_WRITING    STATS
        │         PRACTICE       │
        │            │           ▼
        │            ▼     WRITING_FEEDBACK
        │      PRACTICE_        │
        │       RESULT          │
        │            │          │
        └────────────┴──────────┘
                     │
                     ▼
               MAIN_MENU

Из любого стейта: /menu → MAIN_MENU
```

### Подробный Flow

**1. /start → Онбординг** *(первый запуск)*
- Бот приветствует, объясняет возможности
- Просит написать о себе (на EN или RU): уровень, цели, интересы
- LLM анализирует → определяет уровень, сохраняет профиль
- → Reply keyboard: `[Главное меню]`

**2. Главное меню**
- Reply keyboard: `[Грамматика] [Практика] [Свободное письмо] [Статистика]`
- Сообщение: краткая сводка (streak, последняя активность, рекомендация)

**3. Грамматика → Теория**
- Бот предлагает правило (новое или повторение) — inline buttons для выбора
- LLM объясняет правило с примерами
- Reply keyboard: `[Практика на это правило] [Другое правило] [Меню]`

**4. Практика грамматики**
- Серия упражнений подряд
- Каждое: сообщение + inline buttons (выбор варианта) или ожидание текста (fill the gap)
- Немедленный фидбэк: правильно/неправильно + объяснение
- Reply keyboard: `[Пропустить] [Завершить]`
- После серии → итог: X/Y правильно, % прогресса
- Reply keyboard: `[Ещё практика] [Меню]`

**5. Свободное письмо**
- Бот предлагает тему или просит писать свободно
- Пользователь пишет текст
- LLM разбирает: грамматика, вокабуляр, сильные/слабые стороны
- Reply keyboard: `[Написать ещё] [Меню]`

**6. Статистика**
- Общий прогресс: оценки по правилам, слабые зоны, streak
- Inline buttons: `[По правилам] [По сессиям] [Рекомендации]`
- Reply keyboard: `[Меню]`

### Глобальные команды (доступны из любого стейта)
- `/menu` — вернуться в главное меню
- `/stats` — быстрый доступ к статистике
- `/help` — справка

---

## 9. Data Model (Draft)

### User
<!-- TODO -->

### Progress / Stats
<!-- TODO -->

### Content (Words / Exercises)
<!-- TODO -->

---

## 10. Risks & Open Questions

### Risks
- <!-- TODO -->

### Open Questions
- <!-- TODO -->

---

## 11. Milestones & Timeline

| Milestone | Описание | Статус |
|-----------|----------|--------|
| Discovery | Продукт-документ, исследование | In Progress |
| MVP Dev   | Разработка Telegram Bot | Not Started |
| MVP Launch| Запуск, первые пользователи | Not Started |
| Post-MVP  | Итерации на основе фидбека | Not Started |
| Mini App  | Переход на Telegram Mini App | Not Started |

---

*Последнее обновление: 2026-02-11*
