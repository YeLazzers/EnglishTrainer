# English Trainer Bot üá¨üáß

Telegram –±–æ—Ç –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ —Å –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è–º–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ LLM (GPT/Gemini).

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìö **–ì—Ä–∞–º–º–∞—Ç–∏–∫–∞**: —Ç–µ–æ—Ä–∏—è + –ø—Ä–∞–∫—Ç–∏–∫–∞ –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ç–æ–ø–∏–∫–∏
- ‚úçÔ∏è **–°–≤–æ–±–æ–¥–Ω–æ–µ –ø–∏—Å—å–º–æ**: –Ω–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤ —Å –ø–æ—Å–ª–µ–¥—É—é—â–∏–º —Ä–∞–∑–±–æ—Ä–æ–º
- üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- ü§ñ **LLM-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è**: –≤—Å–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –ø–æ–¥ —É—Ä–æ–≤–µ–Ω—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Runtime**: Node.js + TypeScript
- **Bot Framework**: grammY (Telegram)
- **Database**: SQLite + Prisma ORM
- **Cache**: Redis (–¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π)
- **AI**: OpenAI GPT / Google Gemini

## –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Node.js 18+
- Docker (–¥–ª—è Redis)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repo-url>
cd EnglishTrainer

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –°–æ–∑–¥–∞—Ç—å .env —Ñ–∞–π–ª
cp .env.example .env
# –ó–∞–ø–æ–ª–Ω–∏—Ç—å BOT_TOKEN, OPENAI_API_KEY –∏–ª–∏ GEMINI_API_KEY
```

### –ó–∞–ø—É—Å–∫ Redis

```bash
docker-compose up -d
```

### –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
# Development —Ä–µ–∂–∏–º (—Å hot reload)
npm run dev

# Production —Å–±–æ—Ä–∫–∞
npm run build
npm start
```

---

## –î–µ–ø–ª–æ–π –Ω–∞ Railway üöÄ

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –Ω–∞ [railway.app](https://railway.app)
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
3. –î–æ–±–∞–≤—å—Ç–µ **Redis** —Å–µ—Ä–≤–∏—Å –∏–∑ Databases
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Å–º. –Ω–∏–∂–µ)
5. –î–æ–±–∞–≤—å—Ç–µ Volume –¥–ª—è SQLite: `/app/data`

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
BOT_TOKEN=<–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather>
LLM_PROVIDER=openai
OPENAI_API_KEY=<–≤–∞—à_openai_api_key>
DATABASE_URL=file:/app/data/production.db
# REDIS_URL –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–∏—Ç—Å—è –∏–∑ Redis —Å–µ—Ä–≤–∏—Å–∞
```

### –°—Ç–æ–∏–º–æ—Å—Ç—å

- **Railway**: $5/–º–µ—Å—è—Ü FREE tier (–ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫—Ä—ã–≤–∞–µ—Ç —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥)
- **LLM API**:
  - **Gemini 2.0 Flash**: –ë–ï–°–ü–õ–ê–¢–ù–û –¥–æ 1500 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å
  - **GPT-4o-mini**: ~$10-20/–º–µ—Å –ø—Ä–∏ 100-200 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö/–¥–µ–Ω—å

üìñ **–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è**: [DEPLOYMENT.md](DEPLOYMENT.md)
üìä **–†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏**: [RAILWAY_COSTS.md](RAILWAY_COSTS.md)

---

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [PRODUCT.md](PRODUCT.md) ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞ –∏ –º–µ—Ö–∞–Ω–∏–∫
- [DEPLOYMENT.md](DEPLOYMENT.md) ‚Äî –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é –Ω–∞ Railway
- [RAILWAY_COSTS.md](RAILWAY_COSTS.md) ‚Äî –¥–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏
- [METHODOLOGY.md](METHODOLOGY.md) ‚Äî –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è –æ–±—É—á–µ–Ω–∏—è (CEFR, –≥—Ä–∞–º–º–∞—Ç–∏–∫–∞)
- [CLAUDE.md](CLAUDE.md) ‚Äî –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

---

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
/src
  /adapters      # Infrastructure layer (DB, Redis, LLM)
  /commands      # Telegram commands (/start, /debug)
  /domain        # Domain types & interfaces
  /handlers      # Message handlers
  /stateMachine  # State machine (bot dialog flow)
  /llm           # LLM adapters (OpenAI, Gemini)
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
npm run dev           # –ó–∞–ø—É—Å–∫ –≤ dev —Ä–µ–∂–∏–º–µ
npm run build         # –°–±–æ—Ä–∫–∞ production
npm start             # –ó–∞–ø—É—Å–∫ production build
npm run typecheck     # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
npm run lint          # –õ–∏–Ω—Ç–∏–Ω–≥
npm run format        # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –±–æ—Ç –ø–∏—à–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ JSON-–ª–æ–≥–∏ –≤ stdout (—É–¥–æ–±–Ω–æ –¥–ª—è Railway Logs).

–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
LOG_LEVEL=info
LOG_UPDATES=false
ERROR_ALERT_CHAT_ID=<–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, id –∞–¥–º–∏–Ω-—á–∞—Ç–∞ –¥–ª—è –∞–ª–µ—Ä—Ç–æ–≤>
```

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ **Hexagonal Architecture** (Ports & Adapters):
- **Domain Layer** ‚Äî —á–∏—Å—Ç–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- **Adapter Layer** ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –≤–Ω–µ—à–Ω–∏–º —Å–µ—Ä–≤–∏—Å–∞–º
- **State Machine** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–æ–º –±–æ—Ç–∞

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
