# English Trainer — Methodology

> Методическая основа для обучения, оценки и адаптации контента.
> Базируется на международных стандартах CEFR, English Grammar Profile, English Vocabulary Profile.

---

## 1. Стандарты-ориентиры

### CEFR (Common European Framework of Reference for Languages)
Основной стандарт для определения уровня владения языком. Шесть уровней: A1 → A2 → B1 → B2 → C1 → C2.

Мы используем CEFR как:
- Шкалу для определения уровня пользователя при онбординге
- Основу для группировки грамматики и лексики по уровням
- Ориентир для адаптивной сложности упражнений

### English Grammar Profile (EGP)
Исследование Cambridge, описывающее какие грамматические структуры типичны для каждого уровня CEFR. ~1200 грамматических конструкций, распределённых по уровням.

Мы используем EGP как:
- Каталог грамматических тем с привязкой к уровням
- Основу для последовательности изучения правил
- Критерий оценки: владеет ли пользователь конструкциями своего уровня

### English Vocabulary Profile (EVP)
Аналог EGP для лексики — какие слова и выражения ожидаются на каждом уровне CEFR.

Мы используем EVP как:
- Ориентир для оценки словарного запаса
- Основу для подбора лексики в упражнениях
- Критерий сложности текстов

---

## 2. Языковые компетенции (Skills)

Международные стандарты выделяют ключевые компетенции. Мы адаптируем их под формат Telegram-бота:

| Компетенция | CEFR-категория | Наш формат (MVP) | Статус |
|-------------|---------------|-------------------|--------|
| **Grammar** | Grammatical competence | Теория + упражнения | Active |
| **Vocabulary** | Lexical competence | TBD | Planned |
| **Writing** | Written production | Свободное письмо + фидбэк | Active |
| **Reading** | Reading comprehension | Через тексты упражнений | Implicit |
| **Listening** | Listening comprehension | — | Post-MVP |
| **Speaking** | Spoken production | — | Post-MVP |

### Приоритет для MVP
1. **Grammar** — ядро продукта, наибольший набор правил и упражнений
2. **Writing** — свободное письмо с разбором ошибок (уже есть)
3. **Vocabulary** — следующий на очереди

---

## 3. Структура грамматического каталога

Грамматика организована в иерархию: **категория → тема → правило**.

### Категории (Grammar Categories)

Основаны на EGP с адаптацией под наш формат:

| ID | Категория | Описание | Пример тем |
|----|-----------|----------|------------|
| `TENSES` | Tenses & Aspect | Времена и видовременные формы | Present Simple, Past Perfect, Future Continuous |
| `MODALS` | Modal Verbs | Модальные глаголы | can/could, must/have to, should/ought to |
| `CONDITIONALS` | Conditionals | Условные предложения | Zero, First, Second, Third, Mixed |
| `PASSIVE` | Passive Voice | Страдательный залог | Present passive, Past passive, Modal passive |
| `QUESTIONS` | Questions & Negation | Вопросы и отрицания | Yes/No, Wh-questions, Tag questions |
| `ARTICLES` | Articles & Determiners | Артикли и детерминативы | a/an/the, some/any, quantifiers |
| `NOUNS` | Nouns & Pronouns | Существительные и местоимения | Countable/uncountable, relative pronouns |
| `ADJADV` | Adjectives & Adverbs | Прилагательные и наречия | Comparatives, superlatives, adverb position |
| `PREPOSITIONS` | Prepositions | Предлоги | Time, place, dependent prepositions |
| `CLAUSES` | Clauses & Sentence Structure | Придаточные и структура | Relative clauses, reported speech, linking words |
| `VERBPAT` | Verb Patterns | Глагольные конструкции | Gerund vs infinitive, phrasal verbs |
| `OTHER` | Other Structures | Прочее | There is/are, used to, wish/if only |

### Уровневая привязка

Каждое правило внутри темы привязано к CEFR-уровню:

```
Категория: TENSES
  └─ Тема: Present Simple
       ├─ [A1] Утвердительные предложения (I work, She works)
       ├─ [A1] Отрицания и вопросы (Do you...? / doesn't)
       ├─ [A2] Наречия частотности (always, usually, never)
       └─ [B1] Present Simple vs Present Continuous (stative verbs)
  └─ Тема: Present Perfect
       ├─ [A2] Базовое использование (I have done)
       ├─ [B1] Since / for / already / yet / just
       ├─ [B1] Present Perfect vs Past Simple
       └─ [B2] Present Perfect Continuous vs Present Perfect Simple
```

> **Примечание:** Полный каталог правил будет заполняться поэтапно.
> Сначала — темы для A1-A2, затем B1-B2, затем C1-C2.

---

## 4. Модель оценки пользователя

### 4.1 Что отслеживаем

Для каждого пользователя по каждому правилу:

| Метрика | Описание |
|---------|----------|
| `exposure` | Было ли правило показано (теория) |
| `practice_count` | Сколько раз практиковалось |
| `correct_rate` | % правильных ответов |
| `last_practiced` | Когда последний раз практиковал |
| `mastery` | Расчётный уровень владения (0-100) |

На уровне категории/компетенции — агрегированные метрики.

### 4.2 Уровень владения (Mastery)

Mastery по правилу — не просто `correct_rate`, а взвешенная оценка:

- **Accuracy** — % правильных ответов
- **Recency** — давность последней практики (навык забывается)
- **Consistency** — стабильность результатов (не случайное угадывание)
- **Volume** — достаточно ли было практики для уверенной оценки

Формула расчёта — TBD (будет уточняться при реализации).

### 4.3 Определение сильных и слабых зон

```
Сильная зона:  mastery >= 80% по категории, достаточный объём практики
Слабая зона:   mastery < 50% по категории ИЛИ давно не практиковалось
Зона роста:    50-80%, есть потенциал для улучшения
```

---

## 5. Адаптивная логика (принципы)

### Выбор следующего правила для теории
1. Приоритет — слабые зоны текущего уровня пользователя
2. Новые правила текущего уровня, которые ещё не были показаны
3. Повторение правил с падающим mastery (давно не практиковалось)
4. Правила следующего уровня, если текущий освоен достаточно

### Выбор упражнений для практики
1. Упражнения на текущее правило (после теории)
2. Микс: 70% текущее правило + 30% повторение слабых зон
3. Сложность адаптируется под mastery пользователя

### Оценка свободного письма
- LLM разбирает текст по грамматическим категориям
- Корректное использование правил → повышает mastery
- Ошибки → понижают mastery, правило попадает в приоритет для практики

---

## 6. Дорожная карта заполнения

- [ ] **Шаг 1:** Детализировать грамматический каталог для A1-A2 (полный список правил)
- [ ] **Шаг 2:** Детализировать каталог для B1-B2
- [ ] **Шаг 3:** Описать структуру вокабулярного каталога
- [ ] **Шаг 4:** Формализовать формулу mastery
- [ ] **Шаг 5:** Описать модель данных для хранения статистики (schema)
- [ ] **Шаг 6:** C1-C2 грамматика + продвинутые паттерны

---

*Последнее обновление: 2026-02-13*
